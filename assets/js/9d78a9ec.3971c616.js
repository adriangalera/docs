"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7127],{3438:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Hacking/HTB Academy/Linux fundamentals","title":"Linux fundamentals","description":"System information","source":"@site/docs/Hacking/HTB Academy/Linux fundamentals.md","sourceDirName":"Hacking/HTB Academy","slug":"/Hacking/HTB Academy/Linux fundamentals","permalink":"/docs/Hacking/HTB Academy/Linux fundamentals","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Javascript deobfuscation","permalink":"/docs/Hacking/HTB Academy/Javascript deobfuscation"},"next":{"title":"Pentest in a nutshell","permalink":"/docs/Hacking/HTB Academy/Pentest In a Nutshell"}}');var t=n(4848),i=n(8453);const c={},l="Linux fundamentals",d={},a=[{value:"System information",id:"system-information",level:2},{value:"Find files and directories",id:"find-files-and-directories",level:2},{value:"Redirections",id:"redirections",level:2},{value:"Filter contents",id:"filter-contents",level:2},{value:"Regular expressions (RegEx)",id:"regular-expressions-regex",level:2},{value:"Permissions",id:"permissions",level:2},{value:"User management",id:"user-management",level:2},{value:"Service and process management",id:"service-and-process-management",level:2},{value:"Task scheduling",id:"task-scheduling",level:2},{value:"Systemd",id:"systemd",level:3},{value:"Cron",id:"cron",level:3},{value:"Network services",id:"network-services",level:2}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"linux-fundamentals",children:"Linux fundamentals"})}),"\n",(0,t.jsx)(s.h2,{id:"system-information",children:"System information"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"whoami"}),": current username"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"id"}),": user identity and groups"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"hostname"}),": name of the current host system"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"uname"}),": basic information about OS and system hardware"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"pwd"}),": current directory name"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ifconfig"}),": network interfaces"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ip"}),": network interfaces plus routing, etc"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"netstat"}),": network status"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ss"}),": sockets"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"ps"}),": processes status"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"who"}),": who is logged in"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"env"}),": environment variables"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"lsblk"}),": list block devices"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"lsusb"}),": list USB devices"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"lsof"}),": list open files"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"lspci"}),": list PCI devices"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"find-files-and-directories",children:"Find files and directories"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"which"}),": returns the path to the file or link that should be executed"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"find"}),": find files and folders and filter the results."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"e.g:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"find / -type f -name *.conf -user root -size +20k -newermt 2020-03-03 -exec ls -al {} \\; 2>/dev/null\n"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"-type f"}),": searching for files\n",(0,t.jsx)(s.code,{children:"-name *.conf"}),": All files with the conf extension.\n",(0,t.jsx)(s.code,{children:"-user root"}),": Belongs to root user\n",(0,t.jsx)(s.code,{children:"-size +20k"}),": Larger than 20KiB\n",(0,t.jsx)(s.code,{children:"-newermt 2020-03-03"}),": Files created after the passed date.\n",(0,t.jsx)(s.code,{children:"-exec ls -al {} \\;"}),": Execute a command for each entry, the ",(0,t.jsx)(s.code,{children:"{}"})," char is a wildcard for the filename.\n",(0,t.jsx)(s.code,{children:"2>/dev/null"}),": Sends the error to /dev/null"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"locate"}),": use a local database to improve the searching time. You can update the database with ",(0,t.jsx)(s.code,{children:"sudo updatedb"}),". e.g:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"locate *.conf\n"})}),"\n",(0,t.jsxs)(s.p,{children:["locate does not have filtering options as ",(0,t.jsx)(s.code,{children:"find"})]}),"\n",(0,t.jsx)(s.h2,{id:"redirections",children:"Redirections"}),"\n",(0,t.jsx)(s.p,{children:"Redirect STDOUT to a file:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"find /etc/ -name shadow > results.txt"})}),"\n",(0,t.jsx)(s.p,{children:"Redirect STDERR to null:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"find /etc/ -name shadow 2>/dev/null"})}),"\n",(0,t.jsx)(s.p,{children:"Redirect STDOUT and STDERR to different files:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"find /etc/ -name shadow 2> stderr.txt 1> stdout.txt"})}),"\n",(0,t.jsx)(s.p,{children:"Redirect STDIN:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"cat < stdout.txt"})}),"\n",(0,t.jsx)(s.p,{children:"Pass the contents of stdout.txt to STDIN"}),"\n",(0,t.jsx)(s.p,{children:"Redirect STDOUT and Append to a File"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.code,{children:"find /etc/ -name passwd >> stdout.txt"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:">>"})," will append the contents to a file while ",(0,t.jsx)(s.code,{children:">"})," will truncate the file and start from scratch."]}),"\n",(0,t.jsxs)(s.p,{children:["Pipes ",(0,t.jsx)(s.code,{children:"|"}),": redirect STDOUT from one program to the next"]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.code,{children:"find /etc/ -name *.conf 2>/dev/null | grep systemd"}),"\n",(0,t.jsx)(s.code,{children:"find /etc/ -name *.conf 2>/dev/null | grep systemd | wc -l"})]}),"\n",(0,t.jsx)(s.h2,{id:"filter-contents",children:"Filter contents"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"more"}),": ",(0,t.jsx)(s.code,{children:"cat /etc/passwd | more"}),". Exit the pager with ",(0,t.jsx)(s.code,{children:"Q"})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"less"}),": ",(0,t.jsx)(s.code,{children:"less /etc/passwd"}),". Exit the pager with ",(0,t.jsx)(s.code,{children:"Q"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"head"}),": ",(0,t.jsx)(s.code,{children:"head /etc/passwd"}),". Display the ten first lines of a file."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"tail"}),": ",(0,t.jsx)(s.code,{children:"tail /etc/passwd"}),". Counterpart of ",(0,t.jsx)(s.code,{children:"head"}),". Display the ten last lines of a file"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sort"}),": ",(0,t.jsx)(s.code,{children:"cat /etc/passwd | sort"}),": Sort alphabetically the output"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"grep"}),": ",(0,t.jsx)(s.code,{children:'cat /etc/passwd | grep "/bin/bash"'}),". Pattern matching ot the output"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"cut"}),": Separate the output with delimiters. ",(0,t.jsx)(s.code,{children:'cat /etc/passwd | grep -v "false\\|nologin" | cut -d":" -f1'}),". -d sets the character as delimiter, -f the position to display"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"tr"}),": Replace characters. ",(0,t.jsx)(s.code,{children:'cat /etc/passwd | grep -v "false\\|nologin" | tr ":" " "'}),". Replace ",(0,t.jsx)(s.code,{children:":"})," by space."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"column -t"}),": Tabulate the output: ",(0,t.jsx)(s.code,{children:'cat /etc/passwd | grep -v "false\\|nologin" | tr ":" " " | column -t'})]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"awk"}),": text processor."]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'cat /etc/passwd | grep -v "false\\|nologin" | tr ":" " " | awk \'{print $1, $NF}\'\n'})}),"\n",(0,t.jsx)(s.p,{children:"display the first ($1) and last ($NF) result of the line."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sed"}),": stream editor. Allow to replace characters in more complex fashion. eg:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'cat /etc/passwd | grep -v "false\\|nologin" | tr ":" " " | awk \'{print $1, $NF}\' | sed \'s/bin/HTB/g\'\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Replaces the word ",(0,t.jsx)(s.code,{children:"bin"})," with the word ",(0,t.jsx)(s.code,{children:"HTB"})]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"wc"}),": word count. Useful to count the lines, e.g:"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'cat /etc/passwd | grep -v "false\\|nologin" | tr ":" " " | awk \'{print $1, $NF}\' | wc -l\n'})}),"\n",(0,t.jsx)(s.h2,{id:"regular-expressions-regex",children:"Regular expressions (RegEx)"}),"\n",(0,t.jsx)(s.p,{children:"Regular expressions (RegEx) are like the art of crafting precise blueprints for searching patterns in text or files."}),"\n",(0,t.jsx)(s.p,{children:"Operators:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Group: ",(0,t.jsx)(s.code,{children:"(a)"}),". The round brackets are used to group parts of a regex. Within the brackets, you can define further patterns which should be processed together."]}),"\n",(0,t.jsxs)(s.li,{children:["Square brackets: ",(0,t.jsx)(s.code,{children:"[a-z]"}),". The square brackets are used to define character classes. Inside the brackets, you can specify a list of characters to search for."]}),"\n",(0,t.jsxs)(s.li,{children:["Curly brackets: ",(0,t.jsx)(s.code,{children:"{1,10}"}),". The curly brackets are used to define quantifiers. Inside the brackets, you can specify a number or a range that indicates how often a previous pattern should be repeated."]}),"\n",(0,t.jsxs)(s.li,{children:["OR operator: ",(0,t.jsx)(s.code,{children:"|"})," shows results when one of the two expressions matches"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"\t.*"}),": Operates similarly to an AND operator by displaying results only when both expressions are present and match in the specified order"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Examples:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'grep -E "(my|false)" /etc/passwd\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Searches for lines containing ",(0,t.jsx)(s.code,{children:"my"})," or ",(0,t.jsx)(s.code,{children:"false"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'grep -E "(my.*false)" /etc/passwd\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Searches for lines containing ",(0,t.jsx)(s.code,{children:"my"})," and ",(0,t.jsx)(s.code,{children:"false"}),". Equivalent to ",(0,t.jsx)(s.code,{children:'grep -E "my" /etc/passwd | grep -E "false"'})]}),"\n",(0,t.jsx)(s.h2,{id:"permissions",children:"Permissions"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"cry0l1t3@htb[/htb]$ ls -l /etc/passwd\n\n- rwx rw- r--   1 root root 1641 May  4 23:42 /etc/passwd\n- --- --- ---   |  |    |    |   |__________|\n|  |   |   |    |  |    |    |        |_ Date\n|  |   |   |    |  |    |    |__________ File Size\n|  |   |   |    |  |    |_______________ Group\n|  |   |   |    |  |____________________ User\n|  |   |   |    |_______________________ Number of hard links\n|  |   |   |_ Permission of others (read)\n|  |   |_____ Permissions of the group (read, write)\n|  |_________ Permissions of the owner (read, write, execute)\n|____________ File type (- = File, d = Directory, l = Link, ... )\n"})}),"\n",(0,t.jsxs)(s.p,{children:["We can modify permissions using the ",(0,t.jsx)(s.code,{children:"chmod"})," command, permission group references (u - owner, g - Group, o - others, a - All users), and either a [+] or a [-] to add remove the designated permissions:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"cry0l1t3@htb[/htb]$ ls -l shell\n\n-rwxr-x--x   1 cry0l1t3 htbteam 0 May  4 22:12 shell\n\ncry0l1t3@htb[/htb]$ chmod a+r shell && ls -l shell\n\n-rwxr-xr-x   1 cry0l1t3 htbteam 0 May  4 22:12 shell\n\ncry0l1t3@htb[/htb]$ chmod 754 shell && ls -l shell\n\n-rwxr-xr--   1 cry0l1t3 htbteam 0 May  4 22:12 shell\n"})}),"\n",(0,t.jsx)(s.p,{children:"We can use the octal representation of the permissions:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"Binary Notation:                4 2 1  |  4 2 1  |  4 2 1\n----------------------------------------------------------\nBinary Representation:          1 1 1  |  1 0 1  |  1 0 0\n----------------------------------------------------------\nOctal Value:                      7    |    5    |    4\n----------------------------------------------------------\nPermission Representation:      r w x  |  r - x  |  r - -\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To change the owner of a file or directory, we'll use ",(0,t.jsx)(s.code,{children:"chown"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"chown <user>:<group> <file/directory>\n"})}),"\n",(0,t.jsxs)(s.p,{children:["In addition to standard user and group permissions, Linux allows us to configure special permissions on files through the Set User ID (",(0,t.jsx)(s.code,{children:"SUID"}),") and Set Group ID (",(0,t.jsx)(s.code,{children:"SGID"}),") bits. These bits function like temporary access passes, enabling users to run certain programs with the privileges of another user or group. For example, administrators can use SUID or SGID to grant users elevated rights for specific applications, allowing tasks to be performed with the necessary permissions, even if the user themselves doesn\u2019t normally have them."]}),"\n",(0,t.jsxs)(s.p,{children:["The presence of these permissions is indicated by an ",(0,t.jsx)(s.code,{children:"s"})," in place of the usual ",(0,t.jsx)(s.code,{children:"x"})," in the file's permission set."]}),"\n",(0,t.jsxs)(s.p,{children:["This important to notice, because it's a very good vector for privilege escalation. If a user has ",(0,t.jsx)(s.code,{children:"suid"})," access to a binary, we can use GTFO bins to see how can we escape from that binary and have ",(0,t.jsx)(s.code,{children:"root"})," access."]}),"\n",(0,t.jsxs)(s.p,{children:["In shared directories, we can leverage ",(0,t.jsx)(s.code,{children:"Sticky bits"})," to make sure the owner is the only one that can delete or rename files. Other users can access the directory but can't modify files they don't own."]}),"\n",(0,t.jsx)(s.p,{children:"Example:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"cry0l1t3@htb[/htb]$ ls -l\n\ndrw-rw-r-t 3 cry0l1t3 cry0l1t3   4096 Jan 12 12:30 scripts\ndrw-rw-r-T 3 cry0l1t3 cry0l1t3   4096 Jan 12 12:32 reports\n"})}),"\n",(0,t.jsx)(s.p,{children:"In this example, we see that both directories have the sticky bit set. However, the reports folder has an uppercase T, and the scripts folder has a lowercase t."}),"\n",(0,t.jsx)(s.p,{children:"If the sticky bit is capitalized (T), then this means that all other users do not have execute (x) permissions and, therefore, cannot see the contents of the folder nor run any programs from it. The lowercase sticky bit (t) is the sticky bit where the execute (x) permissions have been set."}),"\n",(0,t.jsx)(s.h2,{id:"user-management",children:"User management"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"sudo"}),": Execute command as a different user."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"su"}),": Switches to user ID (the default user is the superuser)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"useradd"}),": Creates a new user or update default new user information."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"userdel"}),": Deletes user account and related files"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"usermod"}),": Modifies user account"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"addgroup"}),": Add a group to the system"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"delgroup"}),": Delete a group"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"passwd"}),": Changes user password"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"service-and-process-management",children:"Service and process management"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"System services: internal services required during system startup."}),"\n",(0,t.jsx)(s.li,{children:"User-Installed Services: These services are added by users and typically include server applications and other background processes that provide specific features or capabilities."}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Most modern Linux distributions have adopted ",(0,t.jsx)(s.code,{children:"systemd"})," as their initialization system (init system). It is the first process that starts during the boot process and is assigned the Process ID (",(0,t.jsx)(s.code,{children:"PID"}),"). All processes in a Linux system are assigned a PID and can be viewed under the /proc/ directory, which contains information about each process. Processes may also have a Parent Process ID (PPID), indicating that they were started by another process (the parent), making them child processes."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"systemctl start ssh # start service with systemctl\nsystemctl status ssh # check the status\nsystemctl enable ssh # Run this service after startup\n"})}),"\n",(0,t.jsx)(s.p,{children:"Check the process is running:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ps -aux | grep ssh\nsystemctl list-units --type=service # List systemctl enabled services\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To debug services, use ",(0,t.jsx)(s.code,{children:"journalctl"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"journalctl -u ssh.service --no-pager\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To kill a process, we can use ",(0,t.jsx)(s.code,{children:"kill"}),", ",(0,t.jsx)(s.code,{children:"pkill"}),", ",(0,t.jsx)(s.code,{children:"pgrep"})," and ",(0,t.jsx)(s.code,{children:"killall"}),". To interact with a process, we will send them signals:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"1-  SIGHUP - This is sent to a process when the terminal that controls it is closed.\n2-  SIGINT - Sent when a user presses Ctrl + C in the controlling terminal to interrupt a process.\n3-  SIGQUIT - Sent when a user presses Ctrl + D to quit.\n9-  SIGKILL - Immediately kill a process with no clean-up operations.\n15- SIGTERM - Program termination.\n19- SIGSTOP - Stop the program. It cannot be handled anymore.\n20-\tSIGTSTP - Sent when a user presses Ctrl + Z to request for a service to suspend. The user can handle it afterward.\n"})}),"\n",(0,t.jsxs)(s.p,{children:["To send the ",(0,t.jsx)(s.code,{children:"SIGKILL"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"kill 9 <PID> \n"})}),"\n",(0,t.jsxs)(s.p,{children:["We can send a process to background using ",(0,t.jsx)(s.code,{children:"Ctrl + Z"}),". Background process can be observed with ",(0,t.jsx)(s.code,{children:"jobs"})," command:"]}),"\n",(0,t.jsxs)(s.p,{children:["The Ctrl + Z shortcut suspends the processes, and they will not be executed further. To keep it running in the background, we have to enter the command ",(0,t.jsx)(s.code,{children:"bg"})," to put the process in the background."]}),"\n",(0,t.jsxs)(s.p,{children:["Another option is to automatically set the process with an AND sign (",(0,t.jsx)(s.code,{children:"&"}),") at the end of the command."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"ping -c 10 www.hackthebox.eu &\n"})}),"\n",(0,t.jsxs)(s.p,{children:["If we want to get the background process into the foreground and interact with it again, we can use the ",(0,t.jsx)(s.code,{children:"fg <ID>"})," command."]}),"\n",(0,t.jsx)(s.p,{children:"When we need to execute multiple comments, we have multiples options:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["semicolon separator: ",(0,t.jsx)(s.code,{children:";"})]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"echo '1'; echo '2'; echo '3'\n"})}),"\n",(0,t.jsx)(s.p,{children:"The semicolon (;) is a command separator and executes the commands by ignoring previous commands' results and errors."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Double ampersand ",(0,t.jsx)(s.code,{children:"&&"}),":"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"echo '1' && ls MISSING_FILE && echo '3'\n"})}),"\n",(0,t.jsx)(s.p,{children:"If there is an error in one of the commands, the following ones will not be executed anymore, and the whole process will be stopped."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["Pipes ",(0,t.jsx)(s.code,{children:"|"}),"."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Pipes (|) depend not only on the correct and error-free operation of the previous processes but also on the previous processes' results."}),"\n",(0,t.jsx)(s.p,{children:"This will become important on command injection attacks, where the attacker needs to execute multiple commands."}),"\n",(0,t.jsx)(s.h2,{id:"task-scheduling",children:"Task scheduling"}),"\n",(0,t.jsx)(s.p,{children:"Automate tasks by running them at specific times or regular intervals, eliminating the need for manual initiation."}),"\n",(0,t.jsx)(s.h3,{id:"systemd",children:"Systemd"}),"\n",(0,t.jsx)(s.p,{children:"Based on timers."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"sudo vim /etc/systemd/system/mytimer.timer # Create the timer\n[Unit]\nDescription=My Timer\n\n[Timer]\nOnBootSec=3min\nOnUnitActiveSec=1hour\n\n[Install]\nWantedBy=timers.target\nsudo vim /etc/systemd/system/mytimer.service # Create the service\n[Unit]\nDescription=My Service\n\n[Service]\nExecStart=/full/path/to/my/script.sh\n\n[Install]\nWantedBy=multi-user.target\nsudo systemctl daemon-reload # Instruct systemctl to reload the definition\nsudo systemctl start mytimer.timer # start the service\nsudo systemctl enable mytimer.timer # enable the service to be executed at startup\n"})}),"\n",(0,t.jsx)(s.h3,{id:"cron",children:"Cron"}),"\n",(0,t.jsxs)(s.p,{children:["Execute ",(0,t.jsx)(s.code,{children:"crontab"})," to edit cron:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-txt",children:"# System Update\n0 */6 * * * /path/to/update_software.sh\n\n# Execute Scripts\n0 0 1 * * /path/to/scripts/run_scripts.sh\n\n# Cleanup DB\n0 0 * * 0 /path/to/scripts/clean_database.sh\n\n# Backups\n0 0 * * 7 /path/to/scripts/backup.sh\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You can explore crontab format in ",(0,t.jsx)(s.a,{href:"https://crontab.guru/",children:"https://crontab.guru/"})]}),"\n",(0,t.jsx)(s.h2,{id:"network-services",children:"Network services"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"SSH"}),": securely manage remote systems and securely access remote systems to execute commands or transfer files."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["-",(0,t.jsx)(s.code,{children:"NFS"}),": Network File System (NFS) is a network protocol that allows us to store and manage files on remote systems as if they were stored on the local system."]}),"\n",(0,t.jsxs)(s.p,{children:["Use the file ",(0,t.jsx)(s.code,{children:"/etc/exports"})," to define the shares:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"mkdir nfs_sharing\necho '/home/cry0l1t3/nfs_sharing hostname(rw,sync,no_root_squash)' >> /etc/exports\nat /etc/exports | grep -v \"#\"\n"})}),"\n",(0,t.jsx)(s.p,{children:"Now in another computer, we can mount the share:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"mkdir ~/target_nfs\nmount 10.129.12.17:/home/john/dev_scripts ~/target_nfs\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"Web server"}),": Apache, Nginx, Python"]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"python3 -m http.server --directory /home/cry0l1t3/target_files 1234\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Will expose a webserver in port 1234 showing the contents of ",(0,t.jsx)(s.code,{children:"/home/cry0l1t3/target_files"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>l});var r=n(6540);const t={},i=r.createContext(t);function c(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);